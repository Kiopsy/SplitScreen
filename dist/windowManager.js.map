{"mappings":"AACUA,OAAOC,OAAOC,WACdF,OAAOC,OAAOE","sources":["src/windowManager.js"],"sourcesContent":["// Window Manager\r\nconst w = window.screen.availWidth;\r\nconst h = window.screen.availHeight;\r\nconst chrome_width_limit = 500;\r\nconst gap = 20;\r\n\r\n/**\r\n * Create a new window with the given tabs, size, and left position.\r\n * @param tabs - an array of URLs to open in the window\r\n * @param size - the number of windows you want to create\r\n * @param left - The left position of the window. This value is ignored for panels.\r\n */\r\nfunction createWindow(tabs, size, left) {\r\n    chrome.windows.create({\r\n    url: tabs,\r\n    type: \"normal\",\r\n    width: Math.round(size),\r\n    height: h,\r\n    left: Math.round(left),\r\n    top: 0\r\n    });\r\n}\r\n\r\n/**\r\n * Get the current window, then update it with the new size and position.\r\n * @param size - The number of windows you want to split the screen into.\r\n * @param left - The left position of the window.\r\n */\r\nfunction updateWindow(size, left) {\r\n    chrome.windows.getCurrent(function (window) {\r\n    var updateInfo = {\r\n        width: Math.round(size),\r\n        height: h,\r\n        left: Math.round(left),\r\n        top: 0\r\n    };\r\n    (updateInfo.state = \"normal\"), chrome.windows.update(window.id, updateInfo);\r\n    });\r\n}\r\n\r\n/* Splitting the screen into two parts. */\r\nexport default async function split(ratio, screenSide) {\r\n    // query Chrome for tabs in current window\r\n    let queryOptions = { currentWindow: true };\r\n    let tabs = await chrome.tabs.query(queryOptions);\r\n\r\n    let inactiveTabs = [];\r\n    let activeTabs = [];\r\n\r\n    let screenSideRatio, oppositeSideRatio;\r\n    \r\n    if (toPixels(ratio) < chrome_width_limit ) {\r\n      screenSideRatio = fromPixels(chrome_width_limit + gap);\r\n      oppositeSideRatio = fromPixels(w - 500 - gap);\r\n    } else if (toPixels(10 - ratio) < chrome_width_limit) { \r\n      screenSideRatio = fromPixels(w - 500 - gap);\r\n      oppositeSideRatio = fromPixels(chrome_width_limit + gap);\r\n    } else {\r\n      screenSideRatio = ratio;\r\n      oppositeSideRatio = 10 - ratio;\r\n    }\r\n\r\n    let l_size = toPixels(screenSideRatio);\r\n    let r_size = toPixels(oppositeSideRatio);\r\n\r\n    // sort tabs by activeness\r\n    tabs.forEach(tab => {\r\n      if (tab.active) {\r\n        activeTabs.push(tab.url);\r\n      } else {\r\n        inactiveTabs.push(tab.url);\r\n      }\r\n    });\r\n\r\n    if (screenSide == \"L\") {\r\n        createWindow(activeTabs, l_size, 0);\r\n        updateWindow(r_size, l_size);\r\n    } else {\r\n        createWindow(activeTabs, l_size, r_size);\r\n        updateWindow(r_size, 0);\r\n    }\r\n}\r\n\r\n// get a ratio from the number of pixels on the screen\r\nfunction fromPixels(pixels) {\r\n  return 10 / (w / pixels);\r\n}\r\n\r\n// pass in a ratio, get back the number of pixesls it takes up on-screen\r\nfunction toPixels(ratio) {\r\n  return w / (10 / ratio);\r\n}"],"names":["window","screen","availWidth","availHeight"],"version":3,"file":"windowManager.js.map"}